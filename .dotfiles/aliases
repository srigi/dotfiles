# shortcuts
alias dl="cd ~/Downloads"
alias dt="cd ~/Desktop"
alias s="subl ."

alias c='pygmentize -O style=monokai -f console256 -g'
alias ls='gls -lAFh --color --group-directories-first'
alias lsa='gls -lFh --color --group-directories-first'
alias npmls="npm list --depth=0 2>/dev/null"
alias npmo="npm outdated --depth 0"
alias sudo='sudo '												# enable aliases to be sudoâ€™ed
#alias sudo='A=`alias` sudo env '								# save current ENV when sudo
alias irb='irb --readline -r irb/completion'
alias lsports='lsof -Pni4 | grep LISTEN'
alias lsportss='netstat -an | grep LISTEN'

# recursively delete `.DS_Store` files
alias cleanup="find . -type f -name '*.DS_Store' -ls -delete"

# flush Directory Service cache
alias flush="dscacheutil -flushcache && killall -HUP mDNSResponder"

# view HTTP traffic
alias sniff="sudo ngrep -d 'lo0' -t '^(DELETE|GET|OPTIONS|POST|PUT) ' 'tcp and port 8000'"
alias httpdump="sudo tcpdump -i en1 -n -s 0 -w - | grep -a -o -E \"Host\: .*|GET \/.*\""

# intuitive map function
# for example, to list all directories that contain a certain file:
#   find . -name .gitattributes | map dirname
alias map="xargs -n1"


function t() {
	ignore='"node_modules|.git"'
	cmd="tree -a -C --dirsfirst -I $ignore"

	# TODO conditional $ignore (only when L1)

	if [[ $1 -eq 0 ]] then
		cmd="$cmd -L 1"
	fi

	if [[ $1 =~ '^[0-9]+$' ]] then
		cmd="$cmd -L"
	fi

	eval $cmd $@
}

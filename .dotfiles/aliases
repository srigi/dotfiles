# shortcuts
alias dc="docker-compose"
alias dcb="docker-compose build"
alias dcd="docker-compose down"
alias dce="docker-compose exec"
alias dcps="docker-compose ps"
alias dcr="docker-compose run --rm"
alias dcu="docker-compose up"
alias dcub="docker-compose up --build"

alias de="docker exec -ti"
alias di="docker images"
alias dps="docker ps -a"
alias dr="docker run --rm -ti"
alias drm="docker rm"
alias drmi="docker rmi"
alias ds="docker stop"
alias dv="docker volume"
alias dvls="docker volume ls"
alias dvrm="docker volume rm"

alias dl="cd ~/Downloads"
alias s="subl ."

alias cleanup="find $HOME -type f -name '*.DS_Store' -ls -delete"  	# recursively delete `.DS_Store` files from $HOME
alias ls='gls -lAFh --color --group-directories-first'
alias sudo='sudo '													# enable aliases to be sudoâ€™ed
#alias sudo='A=`alias` sudo env '									# save current ENV when sudo

alias composer="php -n -c ~/.dotfiles/php.cli.ini ~/bin/composer.phar"
alias npmls="npm list --depth=0 2>/dev/null"
alias npmo="npm outdated --depth 0"

# networking aliases
alias flush="sudo dscacheutil -flushcache && sudo killall -HUP mDNSResponder"
alias httpdump="sudo tcpdump -i lo0 -n -s 0 -w - | grep -a -o -E \"Host\: .*|GET \/.*\""
alias lsports='lsof -Pn -i4 -i6 | grep LISTEN'
alias lsportss='netstat -an | grep LISTEN'
alias sniff="sudo ngrep -d 'lo0' -t '^(DELETE|GET|OPTIONS|POST|PUT) ' 'tcp and port 80'"

# intuitive map function
# for example, to list all directories that contain a certain file:
#   find . -name .gitattributes | map dirname
alias map="xargs -n1"

function cdf() {
	target=`osascript -e 'tell application "Path Finder" to if (count of Finder windows) > 0 then get POSIX path of the target of the front finder window'`
	if [ "$target" != "" ]; then
		cd "$target"; pwd
	else
		echo 'No Path Finder window found' >&2
	fi
}

function randstr() {
	cat /dev/urandom | gtr -dc 'a-zA-Z0-9!@#$%^&*()-_=+[{}];:\|`~,<>./?' | fold -w ${1:-16} | head -n 1
}

function ssht () {
	ssh -t $@ "tmux attach || tmux new";
}

function t() {
	ignore='"node_modules|.git"'
	cmd="tree -a -C --dirsfirst -I $ignore"

	if [[ $1 -eq 0 ]]; then
		cmd="$cmd -L 1"
	fi

	if [[ $1 =~ '^[0-9]+$' ]]; then
		cmd="$cmd -L"
	fi

	eval $cmd $@
}

alias t2="t 2"
alias t3="t 3"
alias t4="t 4"
alias t5="t 5"
